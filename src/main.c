#include <stdio.h>
#include <stdlib.h>

#include "mrubyc.h"

#define MRBC_MEMORY_SIZE (1024 * 30)
static uint8_t memory_pool[MRBC_MEMORY_SIZE];

const uint8_t mrbbuf[] = {
    0x52, 0x49, 0x54, 0x45, 0x30, 0x33, 0x30, 0x30, 0x00, 0x00, 0x00, 0x6a,
    0x4d, 0x41, 0x54, 0x5a, 0x30, 0x30, 0x30, 0x30, 0x49, 0x52, 0x45, 0x50,
    0x00, 0x00, 0x00, 0x4e, 0x30, 0x33, 0x30, 0x30, 0x00, 0x00, 0x00, 0x42,
    0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x15,
    0x51, 0x02, 0x00, 0x2d, 0x01, 0x00, 0x01, 0x07, 0x02, 0x2d, 0x01, 0x01,
    0x01, 0x25, 0xff, 0xf0, 0x11, 0x01, 0x38, 0x01, 0x69, 0x00, 0x01, 0x00,
    0x00, 0x06, 0x73, 0x61, 0x6d, 0x70, 0x6c, 0x65, 0x00, 0x00, 0x02, 0x00,
    0x04, 0x70, 0x75, 0x74, 0x73, 0x00, 0x00, 0x05, 0x73, 0x6c, 0x65, 0x65,
    0x70, 0x00, 0x45, 0x4e, 0x44, 0x00, 0x00, 0x00, 0x00, 0x08,
};

void app_main() {
  mrbc_init(memory_pool, MRBC_MEMORY_SIZE);

  if (mrbc_create_task(mrbbuf, 0) != NULL) {
    mrbc_run();
  }
}